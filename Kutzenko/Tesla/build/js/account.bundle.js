!function(){"use strict";var e="./account-pages/user-page.html",t="./account-pages/admin-page.html";const o={Android:function(){return navigator.userAgent.match(/Android/i)},Blackberry:function(){return navigator.userAgent.match(/Blackberry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return o.Android()||o.Blackberry()||o.iOS()||o.Opera()||o.Windows()}};const r=document.querySelector(".menu__icon"),n=document.querySelector(".menu__body"),s=Array.from(document.querySelectorAll(".menu__list-link"));var a="http://localhost:5000/auth/registration",c="http://localhost:5000/auth/login";const i=document.querySelector(".preloader"),l=a,d=c;if(document.body.onload=function(){setTimeout((function(){i.classList.contains("done")||i.classList.add("done")}),500)},document.querySelector(".form")){const u=document.querySelector(".container-form"),m=document.querySelector(".form__login"),y=document.querySelector(".form__sign-up"),p=document.querySelector("#username"),g=document.querySelector("#password"),f=document.querySelector("#username-error"),v=document.querySelector("#password-error"),L=document.querySelector("#username-signUp"),S=document.querySelector("#password-signUp"),b=document.querySelector("#confirm-password"),h=document.querySelector("#username-signUp-error"),k=document.querySelector("#password-signUp-error"),q=document.querySelector("#confirm-password-error"),w=document.querySelector("#link-to-signUp"),E=document.querySelector("#link-to-login");function _(e){if(e.target.value===S.value)return e.target.style.borderColor="gray",q.style.display="none",!0}function T(e){e.target.style.borderColor="gray",e.target.nextElementSibling.style.display="none"}p.addEventListener("input",T),g.addEventListener("input",T),L.addEventListener("input",T),S.addEventListener("input",T),b.addEventListener("input",_),w.addEventListener("click",(e=>{e.preventDefault(),u.classList.add("active")})),E.addEventListener("click",(e=>{e.preventDefault(),u.classList.remove("active")})),m.addEventListener("submit",(o=>{o.preventDefault();let r=new FormData;r.append("username",p.value),r.append("password",g.value),i.classList.contains("done")&&i.classList.remove("done"),async function(o,r){const n=await fetch(o,{method:"POST",body:r});let s=await n.json();n.ok?(setTimeout((function(){i.classList.contains("done")||i.classList.add("done")}),100),u.style.display="none",await localStorage.setItem("token",JSON.stringify(s.token)),await localStorage.setItem("username",JSON.stringify(p.value)),"admin"===p.value?document.location=t:document.location=e):(setTimeout((function(){i.classList.contains("done")||i.classList.add("done")}),100),console.log(s),s.usernameError&&(p.style.borderColor="red",f.style.display="block",f.innerText=s.usernameError,p.focus()),s.passwordError&&(g.style.borderColor="red",v.style.display="block",v.innerText=s.passwordError,g.focus()))}(d,r)})),y.addEventListener("submit",(e=>{if(e.preventDefault(),t=S,r=q,(o=b)&&o.value!==t.value&&(o.style.borderColor="red",r.style.display="block",o.focus(),1))return!1;{let n=new FormData;async function s(e,t){const o=await fetch(e,{method:"POST",body:t});let r=await o.json();o.ok?(setTimeout((function(){i.classList.contains("done")||i.classList.add("done")}),100),u.style.display="none",document.querySelector(".account__signup-text").style.display="block"):(setTimeout((function(){i.classList.contains("done")||i.classList.add("done")}),100),console.log(r),r.errors&&r.message?"username"===r.errors.errors[0].path?(L.style.borderColor="red",h.style.display="block",h.innerText=r.errors.errors[0].msg,L.focus()):"password"===r.errors.errors[0].path&&(S.style.borderColor="red",k.style.display="block",k.innerText=r.errors.errors[0].msg,S.focus()):r.message&&(L.style.borderColor="red",h.style.display="block",h.innerText=r.message,L.focus()))}n.append("username",L.value),n.append("password",S.value),i.classList.contains("done")&&i.classList.remove("done"),s(l,n)}var t,o,r}))}o.any()?document.body.classList.add("_touch"):document.body.classList.add("_pc"),r&&r.addEventListener("click",(function(){document.body.classList.toggle("_lock"),r.classList.toggle("_active"),n.classList.toggle("_active")})),s.forEach((e=>{e.classList.remove("active-link"),console.log(document.location.href),document.location.href===e.href&&e.classList.add("active-link")}))}();